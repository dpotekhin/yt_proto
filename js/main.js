"use strict";var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=requestAnimationFrame,$(function(){var e=$("body");if(e.length){var t=e.data("data");console.log("data_url: ",t),t?$.getJSON(t,function(e){$(window).trigger("page:ready",e),console.log("data: ",e)}):console.warn("data url required!")}}),$(function(){function e(e){console.log("player! onPlayerReady"),l.trigger("yt-player:ready")}function t(e){switch(console.log("player! onPlayerStateChange",e,YT.PlayerState),e.data){case YT.PlayerState.UNSTARTED:d=!1;break;case YT.PlayerState.PLAYING:a(d=!0);break;case YT.PlayerState.ENDED:d&&(a(d=!1),l.trigger("yt-player:finished"))}}function a(e,t){console.log("setVisibility",e),e?$("iframe",n).fadeIn(t||100):$("iframe",n).fadeOut(t||100)}var n=$(".yt-player");if(n.length){console.log("yt-player init");var o=document.createElement("script");o.src="https://www.youtube.com/iframe_api";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(o,i);var r,l=$(window),d=!1;a(!1),window.onYouTubeIframeAPIReady=function(){r=new YT.Player($(".yt-player__container",n)[0],{height:"100%",width:"100%",playerVars:{autoplay:0,controls:0,disablekb:1,modestbranding:1,playsinline:1,rel:0,showinfo:0},events:{onReady:e,onStateChange:t}}),console.log("YT player is ready!",r)},l.on("yt-player:play-by-id",function(e,t){t.videoId,r.loadVideoById(t)})}}),$(function(){function a(){--d<=0&&(console.log("all's set"),n())}function n(a){console.log("playNext: ",o),null!=a?o.videos.forEach(function(e,t){e.id==a&&(s=t)}):s++,i=o.videos[s],console.log("playNext: ",s,i),r.trigger("yt-player:play-by-id",{videoId:i.yt_video_id,startSeconds:i.start,endSeconds:i.end,suggestedQuality:"large"})}function t(){i.buttons.forEach(function(e,t){console.log("btn",e,t),$('<div class="select-button" data-video-id="'+e.video_id+'">'+e.title+"<div>").appendTo(l).click(function(){n($(this).data("video-id")),l.addClass("list-player__buttons_hidden"),setTimeout(function(){l.empty().hide()},400)})}),l.show().removeClass("list-player__buttons_hidden")}var e=$(".list-player");if(e.length){var o,i,r=$(window),l=$(".list-player__buttons",e),d=0,s=-1;l.hide().addClass("list-player__buttons_hidden"),d++,r.on("page:ready",function(e,t){o=t,a()}),d++,r.on("yt-player:ready",function(e){a()}),r.on("yt-player:finished",function(e){console.log("FINISHED"),t()})}});